package com.github.alexanderwe.bananaj.model.report;

import static org.junit.Assert.*;

import org.json.JSONObject;
import org.junit.Test;

public class ReportTest {

	@Test
	public void testReport() {
		JSONObject jsonObj = new JSONObject("{\"id\":\"024a680c00\",\"campaign_title\":\"TEST #15 2018\",\"type\":\"regular\",\"list_id\":\"0d12345876\",\"list_is_active\":true,\"list_name\":\"Test FAY\",\"subject_line\":\"Implementation for TEST on March 14, 2019\",\"preview_text\":\"\",\"emails_sent\":9,\"abuse_reports\":0,\"unsubscribed\":0,\"send_time\":\"2019-03-15T14:35:05+00:00\",\"bounces\":{\"hard_bounces\":1,\"soft_bounces\":0,\"syntax_errors\":0},\"forwards\":{\"forwards_count\":1,\"forwards_opens\":0},\"opens\":{\"opens_total\":23,\"unique_opens\":3,\"open_rate\":0.375,\"last_open\":\"2019-05-10T23:14:40+00:00\"},\"clicks\":{\"clicks_total\":0,\"unique_clicks\":0,\"unique_subscriber_clicks\":0,\"click_rate\":0,\"last_click\":\"\"},\"facebook_likes\":{\"recipient_likes\":0,\"unique_likes\":0,\"facebook_likes\":0},\"industry_stats\":{\"type\":\"Education and Training\",\"open_rate\":0.1786604351339173835100382348173297941684722900390625,\"click_rate\":0.025020219652535570509233053826392279006540775299072265625,\"bounce_rate\":0.00925411689963563134642132723683971562422811985015869140625,\"unopen_rate\":0.8120854479664469938171578178298659622669219970703125,\"unsub_rate\":0.00180306368394134879963586204354442088515497744083404541015625,\"abuse_rate\":0.00014923690314063057875924867001771190189174376428127288818359375},\"list_stats\":{\"sub_rate\":0,\"unsub_rate\":0,\"open_rate\":40.44943820224718677991404547356069087982177734375,\"click_rate\":2.272727272727272929131459022755734622478485107421875},\"timeseries\":[{\"timestamp\":\"2019-03-15T14:00:00+00:00\",\"emails_sent\":9,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T15:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":1,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T16:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T17:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T18:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T19:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T20:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T21:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T22:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-15T23:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T00:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T01:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T02:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T03:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T04:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T05:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T06:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T07:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T08:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T09:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T10:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T11:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T12:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0},{\"timestamp\":\"2019-03-16T13:00:00+00:00\",\"emails_sent\":0,\"unique_opens\":0,\"recipients_clicks\":0}],\"ecommerce\":{\"total_orders\":0,\"total_spent\":0,\"total_revenue\":0,\"currency_code\":\"USD\"},\"delivery_status\":{\"enabled\":false},\"_links\":[{\"rel\":\"parent\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/CollectionResponse.json\",\"schema\":\"https://us3.api.mailchimp.com/schema/3.0/CollectionLinks/Reports.json\"},{\"rel\":\"self\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Response.json\"},{\"rel\":\"campaign\",\"href\":\"https://us3.api.mailchimp.com/3.0/campaigns/123a456b78\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Campaigns/Response.json\"},{\"rel\":\"sub-reports\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/sub-reports\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Sub/Response.json\"},{\"rel\":\"abuse-reports\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/abuse-reports\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Abuse/CollectionResponse.json\"},{\"rel\":\"advice\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/advice\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Advice/Response.json\"},{\"rel\":\"open-details\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/open-details\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/OpenDetails/CollectionResponse.json\"},{\"rel\":\"click-details\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/click-details\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/ClickDetails/CollectionResponse.json\"},{\"rel\":\"domain-performance\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/domain-performance\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/DomainPerformance/Response.json\"},{\"rel\":\"eepurl\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/eepurl\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Eepurl/CollectionResponse.json\"},{\"rel\":\"email-activity\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/email-activity\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/EmailActivity/CollectionResponse.json\"},{\"rel\":\"locations\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/locations\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Locations/Response.json\"},{\"rel\":\"sent-to\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/sent-to\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/SentTo/CollectionResponse.json\"},{\"rel\":\"unsubscribed\",\"href\":\"https://us3.api.mailchimp.com/3.0/reports/123a456b78/unsubscribed\",\"method\":\"GET\",\"targetSchema\":\"https://us3.api.mailchimp.com/schema/3.0/Definitions/Reports/Unsubs/CollectionResponse.json\"}]}");
		Report report = new Report(jsonObj);
		assertEquals(report.getId(), "024a680c00");
		assertEquals(report.getCampaignTitle(), "TEST #15 2018");
		//assertEquals(report.getListId(), "0d12345678");
		assertEquals(report.getAbuseReport(), 0);
		//assertEquals(report.getSubjectLine(), "Implementation for TEST on March 14, 2019");
		assertEquals(report.getEmailsSent(), 9);
		assertEquals(report.getForwards().getCount(), 1);
		assertEquals(report.getOpens().getOpensTotal(), 23);
	}

}
